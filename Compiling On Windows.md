**Documentation available on our old wiki:**

<http://mixxx.sourceforge.net/wiki/index.php/HowtoBuildWin32>

Will move this over when I get a chance - Albert

Don't bother - Sean :P

-----

## Qt Creator Build Off of Trunk

The following is alternate way to build Mixxx from trunk using the [Qt
Creator IDE](http://www.qtsoftware.com/developer/qt-creator). It differs
from the normal way of building in that it uses qmake and minGW/GCC, but
does not depend on Python, SCons, or Microsoft Visual Studio.

### Steps

1.  Get the Qt Creator Bundle:
    [qtcreator-0.9.2-rc1-windows-bundle-setup.exe](http://www.qtsoftware.com/developer/qt-creator/qt-creator#qt-creator-binary-packages)
    \~390MB
2.  Get an SVN Client (i.e.
    [TortoiseSVN](http://tortoisesvn.net/downloads) -OR- [SilkSVN's
    Windows svn build](http://www.sliksvn.com/en/download) which can be
    used with Qt Creator's SVN plugin)
3.  Install both
4.  SVN check out *mixxx* and *mixxx-winlib* from trunk - repo is
    <https://mixxx.svn.sourceforge.net/svnroot/mixxx/trunk/>
5.  Open *mixxx.pro* inside Qt Creator which lives in the *mixxx* svn
    checkout you made in the previous step.
6.  Click on the *Projects* side button -\> *Run Settings* tab -\> type
    "*--resourcePath ../res*" (that is with 2 dashes) in the *Arguments*
    Box 
7.  Hit the green run (\>) button

You can track your progress approximately by your compiler warnings
count, a full uninterrupted build will produce \~8100 warnings. ^\_^

***(Need a tip here on how to compile for different architectures or
optimize for the current one)*** - what? why? instructions should be
KISS, add a tip some place else (i.e. Qt disk usage) or make an optional
tips section -G

### Current Issues/Fixes TODO:

  - You need to change "*script/ui\_scriptstudio.h*" to
    "*ui\_scriptstudio.h*" on *scriptstudio.h* line \#5. - Why can't we
    use an \#ifdef to take care of this? And why are we compiling with
    scriptstudio on anyway? -S If you enable normal scripting, you get
    script studio, proper solution is to get all of the generated crap
    out of the src folder... but ifdef for MINGW may do for a quick
    workaround. -G
  - Fix the build script patch for PortAudio to enable ASIO when
    compiling with MinGW/qmake -\> see portaudio TODO (bottom of this
    page)
  - Update INCLUDEPATH to use the new libsndfile.h header
  - Recompile libsndfile with flac, ogg, & vorbis support
  - Figure out why application icon does not get linked.
  - ~~Package this MSVC-free version for distribution~~ --\>
    <http://mixxx.org/packages/windows/mixxx-mingw-20090226-msvc-free.zip>,
    not an msi... but people can play with it.
  - ~~Some users may need to install the Microsoft Visual C++ 2005
    Redistributable Package from here (depending on which CPU
    architecture Mixxx was compiled for):
    [x86](http://www.microsoft.com/downloads/info.aspx?na=22&p=1&SrcDisplayLang=en&SrcCategoryId=&SrcFamilyId=&u=%2fdownloads%2fdetails.aspx%3fFamilyID%3d200b2fd9-ae1a-4a14-984d-389c36f85647%26DisplayLang%3den),
    [x64](http://www.microsoft.com/downloads/info.aspx?na=22&p=4&SrcDisplayLang=en&SrcCategoryId=&SrcFamilyId=&u=%2fdownloads%2fdetails.aspx%3fFamilyID%3deb4ebe2d-33c0-4a47-9dd4-b9a6d7bd44da%26DisplayLang%3den),
    [ia64](http://www.microsoft.com/downloads/info.aspx?na=45&p=1&srcdisplaylang=en&srccategoryid=&srcfamilyid=90548130-4468-4bbc-9673-d6acabd5d13b&u=details.aspx?familyid=526bf4a7-44e6-4a91-b328-a4594adb70e5&displaylang=en)
    - Portaudio was recompiled (DirectSound only) did this solve this or
    do the other vorbis and sndfile dlls still require it? -G -
    sndfile.dll was recompiled and this solves it - S~~ - Fixed.
  - ~~Recompile any other DLLs that are currently dependent on MSVC
    runtime libraries with MinGW/qmake instead~~ - jumpkick
  - ~~Need to store Mixxx user data files in %USERPROFILE%/Application
    Data/Mixxx, not just %USERPROFILE%~~ -- While I agree we should
    change this, it has nothing to do with the build file setup. -G
  - ~~Need to copy directories to bin folder: skins --\> create a .cmd
    file in mixxx folder to do "cd res && ../bin/mixxx.exe && cd .."~~ -
    Fixed, see *$$DESTDIR\\testrun-mixxx.cmd* and also step 6 above
    makes this unnecessary -G
  - ~~*.mixxx\_version.svn* and *.mixxx\_flags.svn* are currently not
    generated by the Qt Creator build process, references in mixxx.cpp
    need to be removed. (or may just just create empty dumpy files using
    cmd.exe echo\>.file)~~ -- Fixed -G
  - ~~After building Mixxx will fail to run with a big negative error
    code meaning its missing dlls in *mixxx\\bin\\*, run
    *mixxx\\bin\\mixxx.exe* outside of *Qt Creator* to get a dialog
    explaining what dll file to copy into the *mixxx\\bin* dir.~~ --
    Fixed -G
    1.  ~~QtCreator\\mingw\\bin\\mingwm10.dll~~
    2.  ~~mixxx\\mixxx-winlib\\vorbis.dll~~
    3.  ~~mixxx\\mixxx-winlib\\ogg.dll~~
    4.  ~~mixxx\\mixxx-winlib\\vorbisfile.dll~~
    5.  ~~mixxx\\mixxx-winlib\\portaudio.dll~~
    6.  ~~mixxx\\mixxx-winlib\\sndfile.dll~~
    7.  ~~QtCreator\\qt\\bin\\Qt3Supportd4.dll~~
    8.  ~~QtCreator\\qt\\bin\\QtCored4.dll~~
    9.  ~~QtCreator\\qt\\bin\\QtGuid4.dll~~
    10. ~~QtCreator\\qt\\bin\\QtNetworkd4.dll~~
    11. ~~QtCreator\\qt\\bin\\QtSqld4.dll~~
    12. ~~QtCreator\\qt\\bin\\QtXmld4.dll~~
    13. ~~QtCreator\\qt\\bin\\QtOpenGLd4.dll~~
    14. ~~QtCreator\\qt\\bin\\QtScriptd4.dll~~

### Tip: Reduce Disk Space Used by Qt

To cut down on the 2GB that Qt Creator install takes, You may want to
delete or zip-n-delete:

  - C:\\Qt\\QtCreator\\qt\\examples (\~600MB -\> zip to \~120MB)
  - C:\\Qt\\QtCreator\\qt\\bin\\QtWebKitd4.dll (\~230MB, Mixxx doesn't
    use WebKit yet -\> zip to \~30MB)
  - C:\\Qt\\QtCreator\\qt\\lib\\QtWebKitd4.dll (\~230MB 2nd copy)

### Optional: Building PortAudio in MinGW

1.  get Msys
    ([MSYS-1.0.10.exe](http://sourceforge.net/project/downloading.php?group_id=2435&filename=MSYS-1.0.10.exe)),
    install and configuring mingw (*C:/Qt/QtCreator/mingw*)
2.  download PortAudio snapshot from
    <http://www.portaudio.com/archives/pa_snapshot.tgz> to
    *C:\\msys\\1.0\\home\\%USERNAME%*
3.  download <http://trent.gamblin.ca/dx/dx9mgw.zip> to
    *C:\\msys\\1.0\\home\\%USERNAME%\\dx9mgw*
4.  Open an MSys window
5.  tar -zxvf pa\_snapshot.tgz && cd portaudio 
6.  patch portaudio with the
    *PA-Snapshot-20090222-mingw-DirectSound.patch* patch
7.  ./configure --with-winapi=directx --with-dxdir=../dx9mgw
8.  copy the contents of *portaudio\\lib\\.libs* to
    *mixxx-winlibs\\portaudio-snapshot\\minGW-bin*
9.  copy the contents of *portaudio\\include* to
    *mixxx-winlibs\\portaudio-snapshot\\include*

#### PA-Snapshot-20090222-mingw-DirectSound.patch

    \--- C:/msys/1.0/home/Administrator/portaudio-snapshot-clean/src/hostapi/dsound/pa_win_ds.c   Wed Jan 21 07:07:32 2009
    +++ C:/msys/1.0/home/Administrator/portaudio/src/hostapi/dsound/pa_win_ds.c   Sat Feb 21 23:36:13 2009
    @@ -95,8 +95,9 @@
     #include "pa_win_ds.h"
     #include "pa_win_ds_dynlink.h"
     #include "pa_win_waveformat.h"
    +#ifdef PAWIN_USE_WDMKS_DEVICE_INFO
     #include "pa_win_wdmks_utils.h"
    -
    +#endif
     
     #if (defined(WIN32) && (defined(_MSC_VER) && (_MSC_VER >= 1200))) /* MSC version 6 and above */
     #pragma comment( lib, "dsound.lib" )
    --- C:/msys/1.0/home/Administrator/portaudio-snapshot-clean/configure Thu Mar 06 12:14:06 2008
    +++ C:/msys/1.0/home/Administrator/portaudio/configure    Sat Feb 21 23:51:24 2009
    @@ -21410,10 +21410,10 @@
                 PADLL="portaudio.dll"
                 THREAD_CFLAGS="-mthreads"
                 SHARED_FLAGS="-shared"
    -            DLL_LIBS="${DLL_LIBS} -lwinmm -lm -L./dx7sdk/lib -ldsound -lole32"
    +            DLL_LIBS="${DLL_LIBS} -lwinmm -lm -L$DXDIR/lib -ldsound -lole32"
                 #VC98="\"/c/Program Files/Microsoft Visual Studio/VC98/Include\""
                 #CFLAGS="$CFLAGS -I$VC98 -DPA_NO_WMME -DPA_NO_ASIO"
    -            CFLAGS="$CFLAGS -I\$(top_srcdir)/include -I$DXDIR/include -DPA_NO_WMME -DPA_NO_ASIO" -DPA_NO_WDMKS
    +            CFLAGS="$CFLAGS -I\$(top_srcdir)/include -I$DXDIR/include -DPA_NO_WMME -DPA_NO_ASIO -DPA_NO_WDMKS"
             elif [ $with_winapi = "asio" ] ; then
                 if [ $with_asiodir ] ; then
                   ASIODIR="$with_asiodir"

#### TODO to get multiple windows sound APIs working:

  - download asiosdk2.2.zip
  - wimme, directsound, asio all at once patch (doesn't apply cleanly)
    --
    <http://www.nabble.com/configure-patch-for-MSYS-users-p20138278.html>
